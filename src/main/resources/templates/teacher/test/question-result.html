<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Giáº£i thÃ­ch Ä‘Ã¡p Ã¡n</title>
    <link rel="stylesheet" th:href="@{/css/style.css}" />
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 30px;
        }
        .question-box {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .chat-message {
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 6px;
        }
        .chat-message.user {
            background-color: #e0f7fa;
        }
        .chat-message.bot {
            background-color: #f1f8e9;
        }
        .btn-info {
            background-color: #2196f3;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<h2>ğŸ“˜ CÃ¢u há»i báº¡n vá»«a lÃ m sai</h2>

<!-- Hiá»ƒn thá»‹ ná»™i dung cÃ¢u há»i -->
<div class="question-box">
    <p><strong>CÃ¢u há»i:</strong> <span th:text="${question.questionContent}"></span></p>
    <ul>
        <li>A. <span th:text="${question.optionA}"></span></li>
        <li>B. <span th:text="${question.optionB}"></span></li>
        <li>C. <span th:text="${question.optionC}"></span></li>
        <li>D. <span th:text="${question.optionD}"></span></li>
    </ul>
    <p>âŒ Báº¡n Ä‘Ã£ chá»n: <strong th:text="${question.studentAnswer}"></strong></p>
    <p>âœ… ÄÃ¡p Ã¡n Ä‘Ãºng: <strong th:text="${question.correctAnswer}"></strong></p>
</div>

<!-- Form gá»­i yÃªu cáº§u giáº£i thÃ­ch -->
<form th:action="@{/teacher/chatbot/explain}" method="post" th:object="${question}">
    <input type="hidden" name="conversationId" th:value="${conversationId}" />
    <input type="hidden" th:field="*{questionId}" />
    <input type="hidden" th:field="*{questionContent}" />
    <input type="hidden" th:field="*{optionA}" />
    <input type="hidden" th:field="*{optionB}" />
    <input type="hidden" th:field="*{optionC}" />
    <input type="hidden" th:field="*{optionD}" />
    <input type="hidden" th:field="*{studentAnswer}" />
    <input type="hidden" th:field="*{correctAnswer}" />
    <button type="submit" class="btn-info">ğŸ’¬ Há»i Chatbot</button>
</form>

<!-- Hiá»ƒn thá»‹ há»™i thoáº¡i chatbot -->
<div class="chat-section">
    <h3>ğŸ§  Giáº£i thÃ­ch tá»« Chatbot</h3>
    <div th:if="${#lists.isEmpty(chatMessages)}">
        <p>ChÆ°a cÃ³ pháº£n há»“i nÃ o tá»« chatbot.</p>
    </div>
    <div th:each="msg : ${chatMessages}">
        <div th:class="'chat-message ' + (msg.role == 'USER' ? 'user' : 'bot')">
            <strong th:text="${msg.role == 'USER' ? 'Báº¡n:' : 'ğŸ¤– Chatbot:'}"></strong>
            <span th:text="${msg.content}"></span>
        </div>
    </div>
</div>

</body>
</html>
